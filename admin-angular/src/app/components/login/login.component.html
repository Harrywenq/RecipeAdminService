<div class="login-page-wrapper">
    <div class="login-card-container">
        <div class="login-card">
            <div class="login-header-section">
                <div class="login-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"></path>
                        <polyline points="10 17 15 12 10 7"></polyline>
                        <line x1="15" y1="12" x2="3" y2="12"></line>
                    </svg>
                </div>
                <h2 class="login-title">Chào mừng trở lại!</h2>
                <p class="login-subtitle">Đăng nhập để khám phá thế giới công thức.</p>
            </div>

            <form #loginForm="ngForm" class="login-form">
                <div class="form-field-group">
                    <label for="username" class="input-label">Tài khoản</label>
                    <div class="input-with-icon">
                        <svg class="input-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round">
                            <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"></path>
                            <circle cx="12" cy="7" r="4"></circle>
                        </svg>
                        <input type="text" class="form-input" [(ngModel)]="username" (input)="onUsernameChange()"
                            required name="username" (focus)="loginForm.form.markAsTouched()" id="username"
                            placeholder="Nhập tài khoản của bạn" />
                    </div>
                </div>

                <div class="form-field-group password-field">
                    <label for="password" class="input-label">Mật khẩu</label>
                    <div class="input-with-icon">
                        <svg class="input-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round">
                            <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                            <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                        </svg>
                        <input type="password" class="form-input" [(ngModel)]="password"
                            placeholder="Nhập tối thiểu 8 ký tự" required name="password" id="password" />
                        <i class="password-toggle fa-solid fa-eye-slash"></i>
                    </div>
                </div>

                <div class="form-options">
                    <div class="form-check checkbox-custom"></div>
                </div>

                <div class="form-field-group">
                    <label for="accessRole" class="input-label">Quyền đăng nhập</label>
                    <div class="select-wrapper">
                        <svg class="select-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round">
                            <path d="M12 2L2 7l10 5 10-5-10-5z"></path>
                            <path d="M2 17l10 5 10-5"></path>
                            <path d="M2 12l10 5 10-5"></path>
                        </svg>
                        <select class="form-select" [(ngModel)]="selectedRole" name="selectedRole" id="accessRole">
                            <option selected disabled>Chọn quyền đăng nhập</option>
                            <option *ngFor="let role of roles" [ngValue]="role">
                                {{ role.name }}
                            </option>
                        </select>
                        <svg class="select-arrow" xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round">
                            <polyline points="6 9 12 15 18 9"></polyline>
                        </svg>
                    </div>
                </div>

                <div *ngIf="errorMessage" class="error-message">
                    {{ errorMessage }}
                </div>

                <div class="form-actions">
                    <button type="button" (click)="login()" class="submit-button primary-button">
                        Đăng nhập
                    </button>
                </div>

                <p class="register-text">
                    Bạn chưa có tài khoản?
                    <a [routerLink]="'/register'" class="register-link">Tạo tài khoản ngay!</a>
                </p>
            </form>
        </div>
    </div>
</div>