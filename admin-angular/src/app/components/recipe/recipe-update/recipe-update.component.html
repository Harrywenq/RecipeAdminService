<div class="recipe-form">
    <h2 class="form-title">üßë‚Äçüç≥ Ch·ªânh s·ª≠a c√¥ng th·ª©c m√≥n ƒÉn</h2>
    <form [formGroup]="recipeForm" (ngSubmit)="submitRecipe()" enctype="multipart/form-data">

        <div class="form-group">
            <label for="name">T√™n m√≥n ƒÉn</label>
            <input id="name" class="form-control" formControlName="name" placeholder="VD: C√† ri g√†" />
            <div *ngIf="recipeForm.get('name')?.invalid && recipeForm.get('name')?.touched" class="error">
                {{ recipeForm.get('name')?.hasError('required') ? 'Vui l√≤ng nh·∫≠p t√™n m√≥n ƒÉn!' : 'T√™n m√≥n ƒÉn ph·∫£i c√≥ √≠t
                nh·∫•t 3 k√Ω t·ª±!' }}
            </div>
        </div>

        <div class="form-group">
            <label for="description">M√¥ t·∫£</label>
            <textarea id="description" class="form-control" formControlName="description" rows="4"
                placeholder="M√¥ t·∫£ ng·∫Øn g·ªçn v·ªÅ m√≥n ƒÉn..."></textarea>
            <div *ngIf="recipeForm.get('description')?.invalid && recipeForm.get('description')?.touched" class="error">
                {{ recipeForm.get('description')?.hasError('required') ? 'Vui l√≤ng nh·∫≠p m√¥ t·∫£!' : 'M√¥ t·∫£ ph·∫£i c√≥ √≠t nh·∫•t
                10 k√Ω t·ª±!' }}
            </div>
        </div>

        <div class="form-group">
            <label for="category">Danh m·ª•c</label>
            <select id="category" class="form-control" formControlName="categoryId">
                <option value="" disabled>-- Ch·ªçn danh m·ª•c --</option>
                <option *ngFor="let category of categories" [value]="category.id">
                    {{ category.name }}
                </option>
            </select>
            <div *ngIf="recipeForm.get('categoryId')?.invalid && recipeForm.get('categoryId')?.touched" class="error">
                Vui l√≤ng ch·ªçn danh m·ª•c!
            </div>
        </div>

        
        <div class="form-group">
            <label for="tag">Th·∫ª</label>
            <select id="tag" class="form-control" formControlName="tagId">
                <option value="" disabled>-- Ch·ªçn th·∫ª --</option>
                <option *ngFor="let tag of tags" [value]="tag.id">
                    {{ tag.name }}
                </option>
            </select>
            <div *ngIf="recipeForm.get('tagId')?.invalid && recipeForm.get('tagId')?.touched" class="error">
                Vui l√≤ng ch·ªçn th·∫ª!
            </div>
        </div>

        <div class="form-group file-upload">
            <label for="thumbnail">·∫¢nh ƒë·∫°i di·ªán</label>
            <input id="thumbnail" type="file" accept="image/*" (change)="onThumbnailChange($event)" />

            <!-- Hi·ªÉn th·ªã ·∫£nh thumbnail preview -->
            <div *ngIf="thumbnailPreview" class="image-preview">
                <img [src]="thumbnailPreview" alt="·∫¢nh ƒë·∫°i di·ªán" class="preview-image" />
            </div>
        </div>

        <div class="form-group file-upload">
            <label for="files">·∫¢nh chi ti·∫øt (t·ªëi ƒëa {{ MAX_IMAGES }})</label>
            <input id="files" type="file" accept="image/*" multiple (change)="onFilesChange($event)" />

            <!-- Hi·ªÉn th·ªã preview danh s√°ch ·∫£nh chi ti·∫øt -->
            <div *ngIf="detailPreviews.length" class="image-preview multiple">
                <img *ngFor="let src of detailPreviews" [src]="src" alt="·∫¢nh chi ti·∫øt" class="preview-image" />
            </div>
        </div>

        <button type="submit" class="btn btn-submit" [disabled]="recipeForm.invalid || isSubmitting">
            {{ isSubmitting ? 'ƒêang t·∫°o...' : 'C·∫≠p nh·∫≠t c√¥ng th·ª©c' }}
        </button>

        <p *ngIf="message" class="message" [class.error]="message.includes('l·ªói') || message.includes('kh√¥ng')">
            {{ message }}
        </p>
        <button type="button" class="btn btn-back" (click)="goBack()">Quay l·∫°i</button>
    </form>
</div>