<div class="category-update-wrapper">
    <div class="header-section">
        <h1><i class="fas fa-edit"></i> Chỉnh sửa danh mục</h1>
    </div>

    <div *ngIf="loading" class="info-card loading-card">
        <i class="fas fa-spinner fa-spin"></i> Đang tải hoặc xử lý danh mục của bạn...
    </div>

    <div *ngIf="errorMessage" class="info-card error-card">
        <i class="fas fa-triangle-exclamation"></i> {{ errorMessage }}
    </div>

    <div *ngIf="successMessage" class="info-card success-card">
        <i class="fas fa-circle-check"></i> {{ successMessage }}
    </div>

    <div class="form-container" *ngIf="categoryId && !loading && !errorMessage">
        <form (ngSubmit)="onSubmit(categoryForm)" #categoryForm="ngForm">
            <div class="form-group">
                <label for="name">Tên danh mục <span class="required">*</span></label>
                <input type="text" id="name" name="name" [(ngModel)]="updateCategory.name" required #name="ngModel"
                    class="form-input" [ngClass]="{'is-invalid': name.invalid && (name.dirty || name.touched)}"
                    placeholder="Ví dụ: Món khai vị, Đồ uống, Món chay..." />
                <div *ngIf="name.invalid && (name.dirty || name.touched)" class="validation-error">
                    <div *ngIf="name.errors?.['required']">Tên danh mục không được để trống.</div>
                </div>
            </div>

            <div class="form-group">
                <label for="description">Mô tả</label>
                <textarea id="description" name="description" [(ngModel)]="updateCategory.description" rows="4"
                    class="form-input" placeholder="Mô tả ngắn gọn về danh mục này..."></textarea>
            </div>

            <div class="form-actions">
                <button type="button" class="delete-button" (click)="onDelete()" [disabled]="loading">
                    <i class="fas fa-trash-alt"></i> Xóa danh mục
                </button>
                <button type="submit" class="submit-button" [disabled]="loading || categoryForm.invalid">
                    <i class="fas fa-save"></i> Cập nhật
                </button>
                <button type="button" class="cancel-button" (click)="goBackToList()">
                    <i class="fas fa-xmark-circle"></i> Hủy
                </button>
            </div>
        </form>
    </div>
</div>